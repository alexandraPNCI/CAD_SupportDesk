<!-- COMMENTS SECTION -->
<h3 class="mb-3 mt-5">Comments</h3>

<% if @ticket.comments.any? %>
  <% @ticket.comments.each do |comment| %>
    <div class="card mb-3 shadow-sm">
      <div class="card-body">
        <p><%= comment.body %></p>
        <p class="text-muted small">
          By <%= comment.user.email %> • <%= time_ago_in_words(comment.created_at) %> ago
        </p>

        <% if policy(comment).destroy? %>
          <%= button_to "Delete Comment",
              ticket_comment_path(@ticket, comment),
              method: :delete,
              class: "btn btn-sm btn-danger",
              data: { confirm: "Delete this comment?" } %>
        <% end %>
      </div>
    </div>
  <% end %>
<% else %>
  <p class="text-muted">No comments yet.</p>
<% end %>

<!-- Add New Comment -->
<div class="card shadow-sm mt-4">
  <div class="card-body">
    <h5>Add a Comment</h5>

    <%= form_with(model: [@ticket, Comment.new]) do |f| %>
      <div class="mb-3">
        <%= f.text_area :body, class: "form-control", placeholder: "Write a comment…" %>
      </div>
      <%= f.submit "Post Comment", class: "btn btn-success" %>
    <% end %>
  </div>
</div>



    
